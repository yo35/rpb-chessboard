<!DOCTYPE html>
<!----------------------------------------------------------------------------->
<!--                                                                         -->
<!--  This file is part of RPB Chessboard, a WordPress plugin.               -->
<!--  Copyright (C) 2013-2021  Yoann Le Montagner <yo35 -at- melix.net>      -->
<!--                                                                         -->
<!--  This program is free software: you can redistribute it and/or modify   -->
<!--  it under the terms of the GNU General Public License as published by   -->
<!--  the Free Software Foundation, either version 3 of the License, or      -->
<!--  (at your option) any later version.                                    -->
<!--                                                                         -->
<!--  This program is distributed in the hope that it will be useful,        -->
<!--  but WITHOUT ANY WARRANTY; without even the implied warranty of         -->
<!--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the          -->
<!--  GNU General Public License for more details.                           -->
<!--                                                                         -->
<!--  You should have received a copy of the GNU General Public License      -->
<!--  along with this program.  If not, see <http://www.gnu.org/licenses/>.  -->
<!--                                                                         -->
<!----------------------------------------------------------------------------->
<html>

<head>
	<meta charset="UTF-8">
	<title>Sandbox for rpbchess-ui-chessboard.js (drag &amp; drop)</title>

	<!-- Third-party required components -->
	<script type="text/javascript" src="../../build/index.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
	<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css" />

	<!-- Tested component -->
	<script type="text/javascript" src="../../js/rpbchess-ui-chessboard.js"></script>
	<link rel="stylesheet" type="text/css" href="../../css/rpbchess-ui-chessboard.css" />

</head>

<body>
	<h1>Sandbox for rpbchess-ui-chessboard.js (drag &amp; drop)</h1>

	<div style="display: flex;">
		<div style="width: 40%;">
			<form>
				<p>
					<input id="make-empty"  type="button" value="Empty position"  /><br/>
					<input id="make-start"  type="button" value="Start position"  /><br/>
					<input id="make-custom" type="button" value="Custom position" />
				</p>
				<p>
					<input id="flip" type="checkbox" />
					<label for="flip">Flip</label>
					<input id="print-fen" type="button" value="Print FEN" />
				</p>
				<p>
					Interaction mode:
					<span>
						<input id="mode-none"       type="radio" name="mode" value="none"       /><label for="mode-none"      >None</label>
						<input id="mode-movePieces" type="radio" name="mode" value="movePieces" /><label for="mode-movePieces">Move pieces</label>
						<input id="mode-play"       type="radio" name="mode" value="play"       /><label for="mode-play"      >Play</label>
					</span>
				</p>
				<table>
					<tr><th></th><th>P</th><th>N</th><th>B</th><th>R</th><th>Q</th><th>K</th></tr>
					<tr><th>White</th>
						<td><input id="mode-addPieces-wp" type="radio" name="mode" value="addPieces-wp" /></td>
						<td><input id="mode-addPieces-wn" type="radio" name="mode" value="addPieces-wn" /></td>
						<td><input id="mode-addPieces-wb" type="radio" name="mode" value="addPieces-wb" /></td>
						<td><input id="mode-addPieces-wr" type="radio" name="mode" value="addPieces-wr" /></td>
						<td><input id="mode-addPieces-wq" type="radio" name="mode" value="addPieces-wq" /></td>
						<td><input id="mode-addPieces-wk" type="radio" name="mode" value="addPieces-wk" /></td>
					</tr>
					<tr><th>Black</th>
						<td><input id="mode-addPieces-bp" type="radio" name="mode" value="addPieces-bp" /></td>
						<td><input id="mode-addPieces-bn" type="radio" name="mode" value="addPieces-bn" /></td>
						<td><input id="mode-addPieces-bb" type="radio" name="mode" value="addPieces-bb" /></td>
						<td><input id="mode-addPieces-br" type="radio" name="mode" value="addPieces-br" /></td>
						<td><input id="mode-addPieces-bq" type="radio" name="mode" value="addPieces-bq" /></td>
						<td><input id="mode-addPieces-bk" type="radio" name="mode" value="addPieces-bk" /></td>
					</tr>
				</table>
				<p>
					Square markers:
					<span>
						<input id="mode-addSquareMarkers-G" type="radio" name="mode" value="addSquareMarkers-G" /><label for="mode-addSquareMarkers-G">Green</label>
						<input id="mode-addSquareMarkers-R" type="radio" name="mode" value="addSquareMarkers-R" /><label for="mode-addSquareMarkers-R">Red</label>
						<input id="mode-addSquareMarkers-Y" type="radio" name="mode" value="addSquareMarkers-Y" /><label for="mode-addSquareMarkers-Y">Yellow</label>
					</span>
				</p>
				<p>
					Arrow markers:
					<span>
						<input id="mode-addArrowMarkers-G" type="radio" name="mode" value="addArrowMarkers-G" /><label for="mode-addArrowMarkers-G">Green</label>
						<input id="mode-addArrowMarkers-R" type="radio" name="mode" value="addArrowMarkers-R" /><label for="mode-addArrowMarkers-R">Red</label>
						<input id="mode-addArrowMarkers-Y" type="radio" name="mode" value="addArrowMarkers-Y" /><label for="mode-addArrowMarkers-Y">Yellow</label>
					</span>
				</p>
				<p>
					Text markers:
					<span>
						<input id="mode-addTextMarkers" type="radio" name="mode" value="addTextMarkers-" />
						<input id="text-marker-descriptor" type="text" />
						(2-character descriptor, first one being the color, second one the glyph)
					</span>
				</p>
				<p>
					<input id="change-turn" type="button" value="Change turn" />
					<input id="clear-annotations" type="button" value="Clear annotations" />
				</p>
				<p>
					<input id="move-from" type="text" />
					<input id="move-to" type="text" />
					<input id="move-go" type="button" value="Move" />
				</p>
				<p>
					<input id="play-text" type="text" />
					<input id="play-go" type="button" value="Play" />
				</p>
				<p>
					<label for="manual-marker-text">Marker descriptor</label>
					<input id="manual-marker-text" type="text" />
				</p>
				<p>
					<input id="add-square-marker" type="button" value="Add square marker" />
					<input id="add-arrow-marker" type="button" value="Add arrow marker" />
					<input id="add-text-marker" type="button" value="Add text marker" />
				</p>
				<p>
					<input id="remove-square-marker" type="button" value="Remove square marker" />
					<input id="remove-arrow-marker" type="button" value="Remove arrow marker" />
					<input id="remove-text-marker" type="button" value="Remove text marker" />
				</p>
			</form>
			<pre id="info"></pre>
		</div>
		<div style="width: 60%; background: #e0ffe0;">
			<div id="a"></div>
		</div>
	</div>

	<hr/>

	<div style="display: flex;">
		<div style="width: 33%;">
			<div id="b1"></div>
		</div>
		<div style="width: 33%;">
			<div id="b2"></div>
		</div>
		<div style="width: 33%;">
			<div id="b3"></div>
		</div>
	</div>

	<script type="text/javascript">

		$('#a').chessboard({
			position: 'start',
			squareSize: 48,
			interactionMode: 'movePieces',

			squareMarkerChange: function(event, ui) {
				$('#info').append('<div>Square markers: ' + $('#a').chessboard('option', 'squareMarkers') + '</div>');
			},
			arrowMarkerChange: function(event, ui) {
				$('#info').append('<div>Arrow markers: ' + $('#a').chessboard('option', 'arrowMarkers') + '</div>');
			},
			textMarkerChange: function(event, ui) {
				$('#info').append('<div>Text markers: ' + $('#a').chessboard('option', 'textMarkers') + '</div>');
			},
			positionChange: function(event, ui) {
				$('#info').append('<div>' + $('#a').chessboard('option', 'position') + '</div>');
			}
		});

		$('#b1').chessboard({
			position: 'empty',
			squareSize: 28,
			interactionMode: 'movePieces'
		});

		$('#b2').chessboard({
			position: 'start',
			squareSize: 28,
			interactionMode: 'movePieces'
		});

		$('#b3').chessboard({
			position: 'r3k3/1bn3nP/1P6/2n3n1/R4pP1/8/Q2P3R/8 w kq - 0 1',
			squareSize: 20,
			interactionMode: 'movePieces'
		});

		$('#make-empty' ).button().click(function() { $('#a').chessboard('option', 'position', 'empty'); });
		$('#make-start' ).button().click(function() { $('#a').chessboard('option', 'position', 'start'); });
		$('#make-custom').button().click(function() {
			$('#a').chessboard('option', 'position', 'r3k3/1bn3nP/1P6/2n3n1/R4pP1/8/Q2P3R/8 w kq - 0 1');
		});

		$('#flip').prop('checked', $('#a').chessboard('option', 'flip')).button().click(function() {
			$('#a').chessboard('option', 'flip', $('#flip').prop('checked'));
		});

		$('#print-fen').button().click(function() {
			$('#info').append('<div>' + $('#a').chessboard('option', 'position') + '</div>');
		});

		if($('#a').chessboard('option', 'interactionMode').startsWith('addTextMarkers-')) {
			$('#mode-addTextMarkers').prop('checked', true);
			$('#text-marker-descriptor').val($('#a').chessboard('option', 'interactionMode').substr('addTextMarkers-'.length));
		}
		else {
			$('#mode-' + $('#a').chessboard('option', 'interactionMode')).prop('checked', true);
			$('#text-marker-descriptor').val('');
		}
		$('input[name="mode"]').each(function(index, e) {
			$(e).click(function() {
				$('#a').chessboard('option', 'interactionMode', $(e).val()==='addTextMarkers-' ? $(e).val() + $('#text-marker-descriptor').val() : $(e).val());
			});
		});
		$('#text-marker-descriptor').change(function() {
			if($('#mode-addTextMarkers').prop('checked')) {
				$('#a').chessboard('option', 'interactionMode', 'addTextMarkers-' + $('#text-marker-descriptor').val());
			}
		});

		$('#change-turn').button().click(function() {
			switch($('#a').chessboard('turn')) {
				case 'w': $('#a').chessboard('turn', 'b'); return;
				case 'b': $('#a').chessboard('turn', 'w'); return;
				default:
					alert('Unknown turn: ' + $('#a').chessboard('turn'));
					break;
			}
		});
		$('#clear-annotations').button().click(function() {
			$('#a').chessboard('option', 'squareMarkers', '');
			$('#a').chessboard('option', 'arrowMarkers', '');
			$('#a').chessboard('option', 'textMarkers', '');
		});
		$('#move-go').button().click(function() {
			var from = $('#move-from').val();
			var to = $('#move-to').val();
			if(from !== '' && to !== '') {
				$('#a').chessboard('movePiece', { from:from, to:to });
			}
		});
		$('#play-go').button().click(function() {
			var move = $('#play-text').val();
			if(move !== '') {
				$('#a').chessboard('option', 'showMoveArrow', true);
				$('#a').chessboard('play', move);
				$('#a').chessboard('option', 'showMoveArrow', false);
			}
		});
		$('#add-square-marker').button().click(function() {
			$('#a').chessboard('addSquareMarker', $('#manual-marker-text').val());
		});
		$('#add-arrow-marker').button().click(function() {
			$('#a').chessboard('addArrowMarker', $('#manual-marker-text').val());
		});
		$('#add-text-marker').button().click(function() {
			$('#a').chessboard('addTextMarker', $('#manual-marker-text').val());
		});
		$('#remove-square-marker').button().click(function() {
			$('#a').chessboard('removeSquareMarker', $('#manual-marker-text').val());
		});
		$('#remove-arrow-marker').button().click(function() {
			$('#a').chessboard('removeArrowMarker', $('#manual-marker-text').val());
		});
		$('#remove-text-marker').button().click(function() {
			$('#a').chessboard('removeTextMarker', $('#manual-marker-text').val());
		});

	</script>

</body>

</html>
